// General
process.container = "mlorthiois/annexa:1.0.1"

params {
  outdir           = "results"
  withGeneCoverage = false
  maxCpu           = 8
  maxMemory        = '40GB'
  enable_conda     = false
}

profiles {
  standard {
    process.executor = 'local'
  }

  slurm {
    process.executor = 'slurm'
  }

  test {
    params {
      input = "$baseDir/examples/samples.txt"
      gtf = "$baseDir/examples/annotation_19.gtf"
      fa = "$baseDir/examples/sequence_19.fa"
      withGeneCoverage = true
      maxCpu = 2
      maxMemory = '8GB'
    }
  }

  conda {
    params.enable_conda = true
    process.conda       = "$baseDir/environment.yml"
  }

  docker {
    docker.enabled = true
    docker.runOptions = '-u \$(id -u):\$(id -g)'
  }

  singularity {
    singularity.enabled = true
    singularity.autoMounts = true
  }
}

manifest {
	name = 'mlorthiois/annexa'
	author = 'IGDR'
	homePage = 'https://github.com/mlorthiois/annexa'
	description = 'Analysis of Nanopore with Nextflow for EXtended Annotation'
	mainScript = 'main.nf'
	nextflowVersion = '>=19.10.0'
	version = '1.0.1'
}

// Trace
dag {
    enabled = true
    file = 'trace/pipeline_dag.html'
}
timeline {
  enabled = true
  file = "trace/execution_timeline.html"
}
report {
  enabled = true
  file = "trace/execution_report.html"
}
